# 🛠️ نظام الدعم الفني الاحترافي - دليل المستخدم

## 📋 نظرة عامة

تم تطوير نظام دعم فني متكامل لإدارة شكاوى العملاء بشكل احترافي مع تدفق عمل واضح بين المدير والموظفين.

---

## 🔄 تدفق العمل (Workflow)

### 1️⃣ **استلام الشكوى**
- يتم إدخال شكوى العميل في النظام
- تُعيّن أولوية (عاجل، عالي، متوسط، منخفض)
- تُصنّف حسب النوع (فواتير، دعم فني، تدريب، أخرى)

### 2️⃣ **تحويل للمدير**
- عند تحويل الشكوى للمدير
- تظهر في لوحة المدير مباشرة
- المدير يطّلع على تفاصيل المشكلة

### 3️⃣ **رد المدير**
- المدير يضع **الحل المقترح**
- يكتب **تعليمات للموظف**
- يحدد **الأولوية**
- يُعيّن **موظف مختص** (اختياري)

### 4️⃣ **تنفيذ الموظف**
- تظهر الشكوى في قائمة الموظف
- الموظف يطّلع على حل المدير
- ينفذ الحل ويتواصل مع العميل
- يختار طريقة التواصل (هاتف، واتساب، بريد، زيارة)

### 5️⃣ **إغلاق الشكوى**
- الموظف يكتب: **"تم الوصول للعميل وحل المشكلة"**
- يُسجّل تفاصيل الحل النهائي
- رد العميل
- تُغلق الشكوى تلقائياً

---

## 👨‍💼 واجهة المدير

### الوصول:
```
الرابط: /support/manager
الصلاحية: manager أو admin فقط
```

### الميزات:

#### 📊 **الإحصائيات الفورية**
- شكاوى جديدة (محولة للمدير)
- قيد المراجعة
- تم الرد عليها
- محلولة

#### 🔍 **الفلاتر المتقدمة**
- **حسب الحالة**: 
  - محولة للمدير
  - تم الرد
  - قيد التنفيذ
  - محلولة
  
- **حسب الأولوية**:
  - عاجل (أحمر)
  - عالي (برتقالي)
  - متوسط (أزرق)
  - منخفض (رمادي)
  
- **حسب التصنيف**:
  - فواتير
  - دعم فني
  - تدريب
  - أخرى
  
- **البحث**: برقم الهاتف أو اسم العميل

#### ✍️ **نموذج رد المدير**

```markdown
الحقول المطلوبة:
1. الحل المقترح * (إجباري)
   - شرح مفصل لكيفية حل المشكلة
   
2. تعليمات للموظف * (إجباري)
   - الخطوات المطلوب تنفيذها
   
3. تحويل إلى موظف (اختياري)
   - اختيار الموظف المسؤول
   
4. تحديث الأولوية
   - إعادة تقييم الأولوية
```

#### 🔔 **الإشعارات**
- عند إضافة حل → يصل إشعار للموظف
- عند حل الشكوى → يصل إشعار للمدير

---

## 👨‍💻 واجهة الموظف

### الوصول:
```
الرابط: /support/employee
الصلاحية: جميع المستخدمين
```

### الميزات:

#### 📑 **التبويبات الثلاثة**

**1. حلول جديدة من المدير**
- الشكاوى التي أرسل لها المدير حل
- بانتظار التنفيذ
- تُعرض بترتيب الأحدث

**2. قيد التنفيذ**
- الشكاوى التي بدأ الموظف العمل عليها
- يمكن إكمال التنفيذ
- تُحفظ المسودات تلقائياً

**3. المنجزة**
- الشكاوى المحلولة خلال آخر 7 أيام
- عرض تفاصيل الحل النهائي

#### 📝 **نموذج التنفيذ**

```markdown
الحقول المطلوبة:
1. الإجراء المتخذ * (إجباري)
   - ماذا فعلت لحل المشكلة؟
   
2. طريقة التواصل * (إجباري)
   - اتصال هاتفي
   - واتساب
   - بريد إلكتروني
   - زيارة ميدانية
   
3. رد العميل * (إجباري)
   - ماذا قال العميل؟
   - هل كان راضياً؟
   
4. تفاصيل الحل النهائي * (إجباري)
   - "تم الوصول للعميل عن طريق [الطريقة]"
   - "تم [شرح/تطبيق/تدريب] العميل على..."
   - "المشكلة حُلّت بنجاح"
```

#### 💾 **الحفظ والإرسال**
- **بدء التنفيذ**: حفظ مسودة
- **تأكيد الحل النهائي**: إغلاق الشكوى

---

## 🎨 الحالات والألوان

| الحالة | اللون | الوصف |
|--------|-------|-------|
| `new` | رمادي | شكوى جديدة |
| `sent_to_manager` | برتقالي | محولة للمدير |
| `manager_responded` | أزرق | تم رد المدير |
| `in_progress` | أصفر | قيد التنفيذ |
| `resolved` | أخضر | محلولة |
| `closed` | أسود | مغلقة |

---

## 🗄️ التعديلات على قاعدة البيانات

### جدول `customer_complaints`

**الحقول الجديدة:**

```sql
-- معلومات التحويل
referred_to_manager INTEGER         -- المدير المحال له
referred_to_department VARCHAR(100) -- الإدارة

-- حل المدير
manager_solution TEXT               -- الحل المقترح
manager_response_date DATETIME      -- تاريخ الرد
manager_instructions TEXT           -- التعليمات للموظف

-- تنفيذ الموظف
employee_action TEXT                -- ما قام به الموظف
customer_contact_method VARCHAR(50) -- طريقة التواصل
customer_response TEXT              -- رد العميل
resolution_details TEXT             -- تفاصيل الحل النهائي
resolved_at DATETIME                -- تاريخ الحل

-- معلومات إضافية
priority VARCHAR(20)                -- الأولوية
category VARCHAR(100)               -- التصنيف
status VARCHAR(50)                  -- الحالة
updated_at DATETIME                 -- آخر تحديث
```

---

## 📡 API Endpoints

### للمدير:

```http
GET /api/support/manager/complaints
POST /api/support/manager/respond/{complaint_id}
```

### للموظف:

```http
GET /api/support/employee/tasks
POST /api/support/employee/mark-progress/{complaint_id}
POST /api/support/employee/resolve/{complaint_id}
```

### عام:

```http
GET /api/support/complaints/{complaint_id}
POST /api/support/assign/{complaint_id}
```

---

## 📝 أمثلة الاستخدام

### مثال 1: مدير يرد على شكوى

```javascript
{
  "manager_solution": "المشكلة في إعدادات الفاتورة. يجب تحديث بيانات العميل في النظام.",
  "manager_instructions": "1. افتح ملف العميل\n2. حدّث البيانات\n3. أعد إصدار الفاتورة\n4. أرسلها للعميل",
  "assigned_to": 5,
  "priority": "high"
}
```

### مثال 2: موظف ينفذ الحل

```javascript
{
  "employee_action": "قمت بفتح ملف العميل وتحديث بياناته وإعادة إصدار الفاتورة",
  "customer_contact_method": "whatsapp",
  "customer_response": "العميل شكر على السرعة وأكد استلام الفاتورة الصحيحة",
  "resolution_details": "تم الوصول للعميل عن طريق الواتساب، تم شرح المشكلة وإرسال الفاتورة المحدثة، العميل راضي تماماً"
}
```

---

## 🔔 نظام الإشعارات

### متى تُرسل الإشعارات؟

1. **عند رد المدير**:
   - للموظف المُعيّن
   - رسالة: "تم إرسال حل من المدير للشكوى #123"
   - رابط مباشر للشكوى

2. **عند حل الشكوى**:
   - للمدير
   - رسالة: "تم حل الشكوى #123"
   - رابط لعرض التفاصيل

---

## 📈 الميزات المستقبلية

- [ ] إشعارات بالبريد الإلكتروني
- [ ] إشعارات واتساب
- [ ] تقارير الأداء
- [ ] تصدير البيانات (Excel/PDF)
- [ ] رسوم بيانية للإحصائيات
- [ ] تتبع زمن الحل (SLA)
- [ ] تقييم رضا العملاء
- [ ] أرشفة الشكاوى القديمة

---

## 🛡️ الصلاحيات

| الدور | المدير | الموظف |
|------|--------|---------|
| عرض الشكاوى | ✅ الكل | ✅ المُعيّنة له |
| إضافة حل | ✅ | ❌ |
| تنفيذ الحل | ❌ | ✅ |
| تحويل شكوى | ✅ | ❌ |
| تغيير الأولوية | ✅ | ❌ |

---

## 📞 الدعم الفني

للمساعدة أو الإبلاغ عن مشاكل:
- **البريد**: support@company.com
- **الهاتف**: +966-XX-XXX-XXXX

---

**آخر تحديث**: نوفمبر 2024
**الإصدار**: 1.0.0
